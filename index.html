<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Numerologic by Iolanda – Full</title>
  <style>
    :root { --indigo:#4a47a3; --bg:#f7f7fb; --card:#ffffff; --muted:#666; }
    body{font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; background:linear-gradient(135deg,#fafafe,#eef0fb); color:#111;margin:0}
    .wrap{max-width:980px;margin:0 auto;padding:24px}
    header{display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap}
    h1{margin:0;font-size:22px;color:var(--indigo)}
    .lang{display:flex;gap:8px}
    .lang button{border:1px solid #ddd;background:#fff;border-radius:12px;padding:8px 12px;cursor:pointer}
    .card{background:var(--card);border:1px solid #e7e7ef;border-radius:16px;box-shadow:0 8px 24px rgba(32,8,128,.04);padding:16px;margin-top:16px}
    .grid{display:grid;grid-template-columns:repeat(2, minmax(0,1fr));gap:12px}
    label{font-size:14px;font-weight:600}
    input{width:100%;padding:10px 12px;border-radius:12px;border:1px solid #d7d7e7}
    .btn{background:var(--indigo);color:#fff;border:0;border-radius:12px;padding:10px 16px;cursor:pointer}
    .pill{display:inline-block;background:#eef0ff;color:#334; border:1px solid #dde; padding:2px 10px;border-radius:999px;font-size:12px;margin-right:6px}
    .kpi{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
    .kpi .box{background:#f5f6ff;border:1px solid #e2e5ff;border-radius:14px;padding:10px;text-align:center}
    .kpi .box .n{font-size:22px;font-weight:800}
    .mt{margin-top:12px}
    table.matrix{border-collapse:collapse;width:100%;max-width:520px;margin:8px auto}
    table.matrix td, table.matrix th{border:1px solid #dadcf2;padding:10px;text-align:center;border-radius:6px}
    table.matrix td{background:#fff}
    .muted{color:var(--muted);font-size:13px}
    details{background:#fcfcff;border:1px solid #eceefe;border-radius:12px;padding:10px}
    summary{cursor:pointer;font-weight:700;color:#2a2a66}
    .interp h3{margin:8px 0 4px}
    .badge{background:#f0f3ff;border:1px solid #dfe3ff;color:#2a2a66;border-radius:999px;padding:2px 8px;font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>🔢 Numerologic by Iolanda</h1>
      <div class="lang">
        <button id="roBtn" aria-pressed="true">🇷🇴 Română</button>
        <button id="frBtn" aria-pressed="false">🇫🇷 Français</button>
      </div>
    </header>

    <section class="card" id="intro"></section>

    <section class="card">
      <div class="grid">
        <div>
          <label id="lblName">Nume complet</label>
          <input id="name" placeholder="Ex: Isabelle Maria Popescu" />
          <p class="muted" id="hintName">Se acceptă diacritice; vor fi normalizate.</p>
        </div>
        <div>
          <label id="lblDate">Data nașterii</label>
          <input id="birth" placeholder="DD.MM.YYYY sau YYYY-MM-DD" />
          <p class="muted" id="hintDate">Format flexibil – se extrag cifrele.</p>
        </div>
      </div>
      <div class="mt">
        <button class="btn" id="calcBtn">Calculează</button>
        <span class="pill" id="keepMasterPill">Numere maestre 11/22/33 păstrate</span>
      </div>
    </section>

    <section class="card">
      <div class="kpi">
        <div class="box"><div class="muted" id="k1">Calea Vieții</div><div class="n" id="lifePath">-</div></div>
        <div class="box"><div class="muted" id="k2">Expresia</div><div class="n" id="expression">-</div></div>
        <div class="box"><div class="muted" id="k3">Dorința inimii</div><div class="n" id="heart">-</div></div>
        <div class="box"><div class="muted" id="k4">Personalitatea</div><div class="n" id="personality">-</div></div>
      </div>
      <p class="muted mt" id="kpiNote">Interpretările detaliate sunt mai jos, după matrice.</p>
    </section>

    <section class="card">
      <h2 id="matTitle" style="margin:6px 0 12px;font-size:18px;color:#2a2a66">Matricea pitagoreană (din data nașterii)</h2>
      <table class="matrix" id="matrixTable"></table>
      <p class="muted" id="matHint">Cifrele din data nașterii sunt puse în căsuțele 1–9. Lipsa unei cifre indică manifestare în  extreme.</p>
    </section>

    <section class="card interp" id="interpSection">
      <h2 style="margin:6px 0 10px;font-size:18px;color:#2a2a66" id="interpTitle">Interpretări detaliate</h2>
      <div id="coreNumbers"></div>
      <div class="mt">
        <details open>
          <summary id="sumSpheres">Cele 9 Sfere de Inteligență – explicații complete (matrice)</summary>
          <div id="spheres"></div>
          <p class="muted mt" id="frNotice" style="display:none">🇫🇷 Notă: traducerea completă pentru toate paragrafele este în curs — interfața, calculele și structura sunt deja bilingve. Vrei să prioritizez o anumită sferă pentru traducere integrală?</p>
        </details>
      </div>
    </section>
  </div>

  <script>
  // ===== I18N (UI labels) =====
  const I18N = {
    ro: {
      intro: '<b>Calculator vibrațional & Matrice Pitagoreană.</b> Introdu numele și data nașterii, apoi apasă <em>Calculează</em>. Interpretările apar jos, la final.',
      name: 'Nume complet', date: 'Data nașterii',
      hintName:'Se acceptă diacritice; vor fi normalizate.', hintDate:'Format flexibil – se extrag cifrele.',
      calc:'Calculează', keepMaster:'Numere maestre 11/22/33 păstrate',
      k1:'Calea Vieții', k2:'Expresia', k3:'Dorința inimii', k4:'Personalitatea', kpiNote:'Interpretările detaliate sunt mai jos, după matrice.',
      matTitle:'Matricea pitagoreană (din data nașterii)', matHint:'Cifrele din data nașterii sunt puse în căsuțele 1–9. Lipsa unei cifre indică manifestare în extreme.',
      interpTitle:'Interpretări detaliate', sumSpheres:'Cele 9 Sfere de Inteligență – explicații complete (matrice)'
    },
    fr: {
      intro: '<b>Calculateur vibratoire & Matrice pythagoricienne.</b> Saisissez le nom et la date de naissance puis cliquez sur <em>Calculer</em>. Les interprétations s’affichent en bas.',
      name:'Nom complet', date:'Date de naissance',
      hintName:"Les accents sont acceptés; ils seront normalisés.", hintDate:'Format flexible – seuls les chiffres sont extraits.',
      calc:'Calculer', keepMaster:'Nombres maîtres 11/22/33 conservés',
      k1:'Chemin de Vie', k2:"Expression", k3:"Souhait du cœur", k4:'Personnalité', kpiNote:"Les interprétations détaillées se trouvent ci‑dessous, après la matrice.",
      matTitle:'Matrice pythagoricienne (à partir de la date)', matHint:"Les chiffres de la date sont répartis dans les cases 1–9. L’absence d’un chiffre indique une manifestation extrême.",
      interpTitle:'Interprétations détaillées', sumSpheres:"Les 9 Sphères d’Intelligence – explications complètes (matrice)"
    }
  };

  // ===== Helpers (diacritics, mapping) =====
  const VOWELS = new Set(["A","E","I","O","U","Y"]);
  const normalize = (s)=> s.toUpperCase().normalize('NFD').replace(/\p{Diacritic}/gu,'').replace(/[^A-Z0-9]/g,' ').replace(/\s+/g,' ').trim();
  const charValue = (ch)=>{const c=ch.charCodeAt(0); if(c<65||c>90) return 0; const base=c-64; return ((base-1)%9)+1};
  const sumDigits=(n)=> n.toString().split('').reduce((a,b)=>a+Number(b),0);
  const reduceNumber=(n,keepMaster=true)=>{ if([11,22,33].includes(n) && keepMaster) return n; while(n>9){ n=sumDigits(n); if([11,22,33].includes(n) && keepMaster) return n; } return n; };
  const parseDateDigits=(s)=> s.replace(/[^0-9]/g,'').split('').map(d=>Number(d));
  const nameNumbers=(name)=>{const letters=normalize(name).replace(/[^A-Z]/g,''); let vowels=0,cons=0,total=0; for(const ch of letters){const v=charValue(ch); total+=v; if(VOWELS.has(ch)) vowels+=v; else cons+=v;} return {total,vowels: vowels, consonants: cons};};

  // ===== Meanings (core) =====
  const meaningsLifePath = {
    1: 'Inițiator, lider, independență, curaj, pionierat. Lecție: încredere și direcție clară.',
    2: 'Diplomat, cooperare, sensibilitate, armonie, parteneriate. Lecție: limite sănătoase.',
    3: 'Creativitate, comunicare, bucurie, expresie artistică. Lecție: finalizează, nu te risipi.',
    4: 'Structură, muncă, responsabilitate, stabilitate. Lecție: flexibilitate și viziune.',
    5: 'Libertate, călătorii, schimbare, adaptabilitate. Lecție: disciplină în haos.',
    6: 'Familie, grijă, estetică, responsabilitate socială. Lecție: echilibru între tine și ceilalți.',
    7: 'Cercetare, introspecție, spiritualitate, perfecționism. Lecție: deschidere și încredere.',
    8: 'Putere, management, resurse, succes material. Lecție: etică și generozitate.',
    9: 'Umanitar, artă, compasiune, finalizări, viziune globală. Lecție: detașare și iertare.',
    11: 'Număr maestru – inspirație, vizionar, canal spiritual. Lecție: ancorare și echilibru emoțional.',
    22: 'Număr maestru – arhitectul vieții, manifestare la scară mare. Lecție: răbdare și coerență.',
    33: 'Număr maestru – maestrul inimii, vindecare prin iubire. Lecție: granițe și auto‑îngrijire.'
  };
  const meaningsExpression = {
    1: 'Autonomie, inițiativă, brand personal puternic.',
    2: 'Tact, mediere, eleganță, lucrul cu oamenii.',
    3: 'Carismă, comunicare, artă, educație prin bucurie.',
    4: 'Organizare, procese, fiabilitate.',
    5: 'Mobilitate, turism, marketing, experimente.',
    6: 'Estetică, îngrijire, design, servicii premium.',
    7: 'Analiză, cercetare, mentorat profund.',
    8: 'Leadership operațional, finanțe, proiecte mari.',
    9: 'Artă, educație, cauze umanitare, internațional.',
    11: 'Inspirație publică, mesaj spiritual, creativitate superioară.',
    22: 'Implementare vizionară, proiecte internaționale solide.',
    33: 'Educație vindecătoare, ghidaj din inimă la scară largă.'
  };

  // ===== Spheres (RO full) – extrase și condensate fidel din documentul tău =====
  // Notă: Pentru FR, UI este deja tradusă; conținutul integral FR îl completăm după confirmare.
  const spheresRO = {
    1: {
      title: '1 – Sfera de Inteligență Psihică',
      blocks: [
        'Căsuța 1 – Psihicul, inteligența psihică, caracterul și voința psihică: căutare de soluții, idei noi, luarea deciziilor, independență, caracter. Cei cu 1 și 11 pot avea tendință spre depresie; 4 sau mai mulți de 1 – risc de tulburare psihică maniacală / delir.',
        'Un singur 1: ca un soare ce luminează doar pentru sine. 11: luminează și încălzește uneori. 111: oferă constant lumină și căldură fără a aștepta ceva. 1111: pot „pârjoli” uneori. 11111+: ca soarele în miezul verii; în situații poate deveni torță.',
        'Lipsă de 1 (0): manifestare extremistă între generozitate și egoism; nevoie de afirmare a dorințelor și de a se impune când e călcat în picioare; categorie de spirite evoluate, întâlniți mai ales după 2000.'
      ]
    },
    2: {
      title: '2 – Sfera de Inteligență Emoțională',
      blocks: [
        'Versatilitate emoțională, energie, magnetism, sensibilitate. Fără niciun 2: versatilitate scăzută, trecere grea între stări, dificil de lucrat cu publicul. Fără măcar 22: relația directă cu publicul nu este punct forte. 222+: versatilitate emoțională mare – adaptare facilă fiecărui om.'
      ]
    },
    3: {
      title: '3 – Sfera de Inteligență Cognitivă',
      blocks: [
        'Zero la 3: extremism cognitiv – sclipiri de geniu sau dificultăți de integrare; creativitate când la maxim, când deloc; logica nu e punct forte; preferință pentru uman; tendința de a repeta greșelile; matematică mai greu de înțeles; corelații cu probabilitatea de a avea băiat (în funcție de partener).',
        'Un singur 3 – Încăpățânatul: învață doar din greșelile proprii; poate excela într‑o știință exactă din aria de interes; memorează selectiv.',
        'Doi de 3 – Dascălul/Profesorul: imaginație bogată, învață din propriile greșeli și ale altora, explicând altora își clarifică ideile; informații multe dar uneori superficiale; când iubește un domeniu, îl duce spre artă.'
      ]
    },
    4: {
      title: '4 – Sfera de Inteligență Fizică',
      blocks: [
        'Zero la 4: manifestare extremistă a potențialului practic (maxim/minim); legătură strânsă cu tatăl (absent sau copleșitor); imunitate aparte; nevoie de practică; risc de 2 boli cronice la 40–50 ani.',
        'Un singur 4: ordonat, practic, meșteșugar; rezistență la boli; capacitate de autovindecare.',
        'Doi de 4: ordine și îngrijire; muncitor, talent la lucrul manual; model de credințe preluat de la tată; cerințe ale corpului fizic mari; sănătate puternică; grijă să nu devină sclavul câștigului material; organizator al altora, nu mereu al său.',
        'Trei de 4: inteligență corporală mare, rezistență fizică; risc de a uita de odihnă; potențial de „mașină de muncă”; nevoie de echilibru.'
      ]
    },
    5: {
      title: '5 – Sfera de Inteligență Intuitivă',
      blocks: [
        'Zero la 5: intuiție și logică duse în extrem sau absente; indecizie; imagine de sine fluctuantă; gelozie pe libertatea altora; rezistență la schimbare; dificultăți în realizarea viselor; imunitate scăzută.',
        'Un singur 5 – Încăpățânatul: caută libertatea, dar are de lucrat la constanță.'
      ]
    },
    6: {
      title: '6 – Sfera de Inteligență Volitivă (familie/responsabilitate)',
      blocks: [
        'Un singur 6 – Responsabilul: își asigură traiul, muncitor, dar are tendința să preia problemele altora; natură creativă, iubește arta și familia.',
        'Doi de 6: practic, adaptabil, bun statut material; poate „mima” exteriorul până atinge scopul; bun la bani; memorie bună; are nevoie să folosească mai mult creativitatea.',
        'Trei de 6 – Harnicul / Seducătorul: maniac al muncii, materializează rapid, atracție sexuală crescută; impulsiv; potențial creativ uriaș dar ușor distras de grijile casnice.',
        'Patru de 6: posesivitate, instinct sexual puternic, harnic, responsabil.'
      ]
    },
    7: {
      title: '7 – Sfera de Inteligență Spirituală',
      blocks: [
        'Zero la 7: extremism spiritual – ateism sau fanatism; neîncredere, teamă de singurătate; neplăcerea efortului fizic; spre a doua parte a vieții poate surveni trezirea spirituală (sau invers).',
        'Doi de 7: individualism, iubesc singurătatea; viață încercată, test de credință; buni dascăli, înțelepți, analitici; căutători ai sensului vieții.',
        'Trei de 7 – „Chip angelic”: trăiesc intens, pot schimba destine; atrași de supranatural; misiune de ocrotire; carismă aparte.'
      ]
    },
    8: {
      title: '8 – Sfera de Inteligență Socială (ordine/putere)',
      blocks: [
        'Zero la 8: simț al datoriei fluctuant; spirit de sacrificiu dus în extreme; posibilități de acumulare materială dar instabilitate familială; lipsă de punctualitate/organizare; comunicarea în societate este de mare ajutor.',
        'Un singur 8: ordonat, organizat, atent la detalii; duce sarcinile la capăt, dar stresul îl afectează; nu-i plac constrângerile; în copilărie poate fi neastâmpărat.',
        'Patru de 8: foarte rari; pot avea capacități paranormale; simt chemarea dreptății; pot deveni lideri incomozi pentru alții.'
      ]
    },
    9: {
      title: '9 – Sfera de Inteligență Mentală / IQ',
      blocks: [
        'Zero la 9 (mai ales născuți după 2000): inteligență inconstantă; dependență de tehnologie; curiozitate pentru tainele universului; adaptare greoaie la schimbări până intervin factori externi; natura îi armonizează.',
        'Un singur 9: IQ mediu; dor de casă; nu oferă frecvent ajutor, dar o face în momente critice; poate genera conflicte.',
        'Doi de 9: potențial creativ mare; probleme cu emoțiile; memorie puternică; pot fi superficiali fără motivație.',
        'Trei de 9: încredere mare în sine, iubesc pacea și natura; pot fi creduli; idei uneori dure; schimbă des mediul.',
        'Patru/Cinci de 9: minte sclipitoare, forță intelectuală deosebită; pot manipula sau deveni țintă a jocurilor de culise dacă abuzează.'
      ]
    }
  };

  // Minimal FR placeholders for spheres (UI already bilingual). To be expanded with full fluent FR.
  const spheresFR = Object.fromEntries(Object.entries(spheresRO).map(([k,v])=>[
    k,
    { title: v.title.replace('Sfera de Inteligență','Sphère d’Intelligence').replace('Matricea','Matrice'), blocks: v.blocks.map(t=> '📝 Traduction FR à venir – '+t) }
  ]));

  // ===== Renderers =====
  let currentLang = 'ro';
  const $ = (id)=> document.getElementById(id);

  function setLang(lang){
    currentLang = lang;
    const L = I18N[lang];
    $('intro').innerHTML = L.intro;
    $('lblName').textContent = L.name;
    $('lblDate').textContent = L.date;
    $('hintName').textContent = L.hintName;
    $('hintDate').textContent = L.hintDate;
    $('calcBtn').textContent = L.calc;
    $('keepMasterPill').textContent = L.keepMaster;
    $('k1').textContent = L.k1; $('k2').textContent = L.k2; $('k3').textContent = L.k3; $('k4').textContent = L.k4;
    $('kpiNote').textContent = L.kpiNote;
    $('matTitle').textContent = L.matTitle;
    $('matHint').textContent = L.matHint;
    $('interpTitle').textContent = L.interpTitle;
    $('sumSpheres').textContent = L.sumSpheres;
    $('frNotice').style.display = lang==='fr' ? 'block' : 'none';
    renderSpheres([]); // reset
  }

  function buildMatrixCounts(dateStr){
    const digits = parseDateDigits(dateStr);
    const counts = {1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0};
    for(const d of digits){ if(d!==0) counts[d]++; }
    return counts;
  }

  function renderMatrix(counts){
    const order = [[1,2,3],[4,5,6],[7,8,9]];
    const t = ['<tbody>'];
    for(const row of order){
      t.push('<tr>');
      for(const n of row){
        const c = counts[n]||0;
        t.push(`<td><div class="badge">${n}</div><div style="font-weight:800;font-size:18px;margin-top:4px">${c||'–'}</div></td>`);
      }
      t.push('</tr>');
    }
    t.push('</tbody>');
    $('matrixTable').innerHTML = t.join('');
  }

  function renderCoreNumbers(res){
    const L = I18N[currentLang];
    const html = `
      <details open>
        <summary>${L.k1}: <span class="badge">${res.lifePath}</span></summary>
        <p class="mt">${meaningsLifePath[res.lifePath]||''}</p>
      </details>
      <details class="mt" open>
        <summary>${L.k2}: <span class="badge">${res.expression}</span></summary>
        <p class="mt">${meaningsExpression[res.expression]||''}</p>
      </details>
      <details class="mt">
        <summary>${L.k3}: <span class="badge">${res.heart}</span></summary>
        <p class="mt">—</p>
      </details>
      <details class="mt">
        <summary>${L.k4}: <span class="badge">${res.personality}</span></summary>
        <p class="mt">—</p>
      </details>
    `;
    $('coreNumbers').innerHTML = html;
  }

  function renderSpheres(counts){
    const dict = currentLang==='ro' ? spheresRO : spheresFR;
    const rows = [];
    for(let i=1;i<=9;i++){
      const info = dict[i];
      const c = counts[i]||0;
      const badge = `<span class="badge">${i} · ${c || '0'}</span>`;
      rows.push(`<h3>${info.title} ${badge}</h3>`);
      info.blocks.forEach(par=> rows.push(`<p>${par}</p>`));
      rows.push('<hr style="border:none;border-top:1px dashed #e3e5ff;margin:12px 0">');
    }
    $('spheres').innerHTML = rows.join('');
  }

  // ===== Calculate =====
  function calculate(){
    const name = $('name').value||'';
    const date = $('birth').value||'';
    const keepMaster = true;

    // Life Path
    const sum = parseDateDigits(date).reduce((a,b)=>a+b,0);
    const lifePath = reduceNumber(sum, keepMaster);

    // Name numbers
    const { total, vowels, consonants } = nameNumbers(name);
    const expression = reduceNumber(total, keepMaster);
    const heart = reduceNumber(vowels, keepMaster);
    const personality = reduceNumber(consonants, keepMaster);

    const results = { lifePath, expression, heart, personality };

    // Render KPIs
    $('lifePath').textContent = lifePath||'-';
    $('expression').textContent = expression||'-';
    $('heart').textContent = heart||'-';
    $('personality').textContent = personality||'-';

    // Matrix
    const counts = buildMatrixCounts(date);
    renderMatrix(counts);

    // Interp
    renderCoreNumbers(results);
    renderSpheres(counts);
  }

  // ===== Events =====
  $('calcBtn').addEventListener('click', calculate);
  $('roBtn').addEventListener('click', ()=>{ setLang('ro'); $('roBtn').setAttribute('aria-pressed','true'); $('frBtn').setAttribute('aria-pressed','false'); });
  $('frBtn').addEventListener('click', ()=>{ setLang('fr'); $('frBtn').setAttribute('aria-pressed','true'); $('roBtn').setAttribute('aria-pressed','false'); });

  // Init
  setLang('ro');
  </script>
</body>
</html>
