<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Numerologic by Iolanda â€“ Full</title>
  <style>
    :root { --indigo:#4a47a3; --bg:#f7f7fb; --card:#ffffff; --muted:#666; }
    body{font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; background:linear-gradient(135deg,#fafafe,#eef0fb); color:#111;margin:0}
    .wrap{max-width:980px;margin:0 auto;padding:24px}
    header{display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap}
    h1{margin:0;font-size:22px;color:var(--indigo)}
    .lang{display:flex;gap:8px}
    .lang button{border:1px solid #ddd;background:#fff;border-radius:12px;padding:8px 12px;cursor:pointer}
    .card{background:var(--card);border:1px solid #e7e7ef;border-radius:16px;box-shadow:0 8px 24px rgba(32,8,128,.04);padding:16px;margin-top:16px}
    .grid{display:grid;grid-template-columns:repeat(2, minmax(0,1fr));gap:12px}
    label{font-size:14px;font-weight:600}
    input{width:100%;padding:10px 12px;border-radius:12px;border:1px solid #d7d7e7}
    .btn{background:var(--indigo);color:#fff;border:0;border-radius:12px;padding:10px 16px;cursor:pointer}
    .pill{display:inline-block;background:#eef0ff;color:#334; border:1px solid #dde; padding:2px 10px;border-radius:999px;font-size:12px;margin-right:6px}
    .kpi{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
    .kpi .box{background:#f5f6ff;border:1px solid #e2e5ff;border-radius:14px;padding:10px;text-align:center}
    .kpi .box .n{font-size:22px;font-weight:800}
    .mt{margin-top:12px}
    table.matrix{border-collapse:collapse;width:100%;max-width:520px;margin:8px auto}
    table.matrix td, table.matrix th{border:1px solid #dadcf2;padding:10px;text-align:center;border-radius:6px}
    table.matrix td{background:#fff}
    .muted{color:var(--muted);font-size:13px}
    details{background:#fcfcff;border:1px solid #eceefe;border-radius:12px;padding:10px}
    summary{cursor:pointer;font-weight:700;color:#2a2a66}
    .interp h3{margin:8px 0 4px}
    .badge{background:#f0f3ff;border:1px solid #dfe3ff;color:#2a2a66;border-radius:999px;padding:2px 8px;font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>ðŸ”¢ Numerologic by Iolanda</h1>
      <div class="lang">
        <button id="roBtn" aria-pressed="true">ðŸ‡·ðŸ‡´ RomÃ¢nÄƒ</button>
        <button id="frBtn" aria-pressed="false">ðŸ‡«ðŸ‡· FranÃ§ais</button>
      </div>
    </header>

    <section class="card" id="intro"></section>

    <section class="card">
      <div class="grid">
        <div>
          <label id="lblName">Nume complet</label>
          <input id="name" placeholder="Ex: Isabelle Maria Popescu" />
          <p class="muted" id="hintName">Se acceptÄƒ diacritice; vor fi normalizate.</p>
        </div>
        <div>
          <label id="lblDate">Data naÈ™terii</label>
          <input id="birth" placeholder="DD.MM.YYYY sau YYYY-MM-DD" />
          <p class="muted" id="hintDate">Format flexibil â€“ se extrag cifrele.</p>
        </div>
      </div>
      <div class="mt">
        <button class="btn" id="calcBtn">CalculeazÄƒ</button>
        <span class="pill" id="keepMasterPill">Numere maestre 11/22/33 pÄƒstrate</span>
      </div>
    </section>

    <section class="card">
      <div class="kpi">
        <div class="box"><div class="muted" id="k1">Calea VieÈ›ii</div><div class="n" id="lifePath">-</div></div>
        <div class="box"><div class="muted" id="k2">Expresia</div><div class="n" id="expression">-</div></div>
        <div class="box"><div class="muted" id="k3">DorinÈ›a inimii</div><div class="n" id="heart">-</div></div>
        <div class="box"><div class="muted" id="k4">Personalitatea</div><div class="n" id="personality">-</div></div>
      </div>
      <p class="muted mt" id="kpiNote">InterpretÄƒrile detaliate sunt mai jos, dupÄƒ matrice.</p>
    </section>

    <section class="card">
      <h2 id="matTitle" style="margin:6px 0 12px;font-size:18px;color:#2a2a66">Matricea pitagoreanÄƒ (din data naÈ™terii)</h2>
      <table class="matrix" id="matrixTable"></table>
      <p class="muted" id="matHint">Cifrele din data naÈ™terii sunt puse Ã®n cÄƒsuÈ›ele 1â€“9. Lipsa unei cifre indicÄƒ manifestare Ã®n  extreme.</p>
    </section>

    <section class="card interp" id="interpSection">
      <h2 style="margin:6px 0 10px;font-size:18px;color:#2a2a66" id="interpTitle">InterpretÄƒri detaliate</h2>
      <div id="coreNumbers"></div>
      <div class="mt">
        <details open>
          <summary id="sumSpheres">Cele 9 Sfere de InteligenÈ›Äƒ â€“ explicaÈ›ii complete (matrice)</summary>
          <div id="spheres"></div>
          <p class="muted mt" id="frNotice" style="display:none">ðŸ‡«ðŸ‡· NotÄƒ: traducerea completÄƒ pentru toate paragrafele este Ã®n curs â€” interfaÈ›a, calculele È™i structura sunt deja bilingve. Vrei sÄƒ prioritizez o anumitÄƒ sferÄƒ pentru traducere integralÄƒ?</p>
        </details>
      </div>
    </section>
  </div>

  <script>
  // ===== I18N (UI labels) =====
  const I18N = {
    ro: {
      intro: '<b>Calculator vibraÈ›ional & Matrice PitagoreanÄƒ.</b> Introdu numele È™i data naÈ™terii, apoi apasÄƒ <em>CalculeazÄƒ</em>. InterpretÄƒrile apar jos, la final.',
      name: 'Nume complet', date: 'Data naÈ™terii',
      hintName:'Se acceptÄƒ diacritice; vor fi normalizate.', hintDate:'Format flexibil â€“ se extrag cifrele.',
      calc:'CalculeazÄƒ', keepMaster:'Numere maestre 11/22/33 pÄƒstrate',
      k1:'Calea VieÈ›ii', k2:'Expresia', k3:'DorinÈ›a inimii', k4:'Personalitatea', kpiNote:'InterpretÄƒrile detaliate sunt mai jos, dupÄƒ matrice.',
      matTitle:'Matricea pitagoreanÄƒ (din data naÈ™terii)', matHint:'Cifrele din data naÈ™terii sunt puse Ã®n cÄƒsuÈ›ele 1â€“9. Lipsa unei cifre indicÄƒ manifestare Ã®n extreme.',
      interpTitle:'InterpretÄƒri detaliate', sumSpheres:'Cele 9 Sfere de InteligenÈ›Äƒ â€“ explicaÈ›ii complete (matrice)'
    },
    fr: {
      intro: '<b>Calculateur vibratoire & Matrice pythagoricienne.</b> Saisissez le nom et la date de naissance puis cliquez sur <em>Calculer</em>. Les interprÃ©tations sâ€™affichent en bas.',
      name:'Nom complet', date:'Date de naissance',
      hintName:"Les accents sont acceptÃ©s; ils seront normalisÃ©s.", hintDate:'Format flexible â€“ seuls les chiffres sont extraits.',
      calc:'Calculer', keepMaster:'Nombres maÃ®tres 11/22/33 conservÃ©s',
      k1:'Chemin de Vie', k2:"Expression", k3:"Souhait du cÅ“ur", k4:'PersonnalitÃ©', kpiNote:"Les interprÃ©tations dÃ©taillÃ©es se trouvent ciâ€‘dessous, aprÃ¨s la matrice.",
      matTitle:'Matrice pythagoricienne (Ã  partir de la date)', matHint:"Les chiffres de la date sont rÃ©partis dans les cases 1â€“9. Lâ€™absence dâ€™un chiffre indique une manifestation extrÃªme.",
      interpTitle:'InterprÃ©tations dÃ©taillÃ©es', sumSpheres:"Les 9 SphÃ¨res dâ€™Intelligence â€“ explications complÃ¨tes (matrice)"
    }
  };

  // ===== Helpers (diacritics, mapping) =====
  const VOWELS = new Set(["A","E","I","O","U","Y"]);
  const normalize = (s)=> s.toUpperCase().normalize('NFD').replace(/\p{Diacritic}/gu,'').replace(/[^A-Z0-9]/g,' ').replace(/\s+/g,' ').trim();
  const charValue = (ch)=>{const c=ch.charCodeAt(0); if(c<65||c>90) return 0; const base=c-64; return ((base-1)%9)+1};
  const sumDigits=(n)=> n.toString().split('').reduce((a,b)=>a+Number(b),0);
  const reduceNumber=(n,keepMaster=true)=>{ if([11,22,33].includes(n) && keepMaster) return n; while(n>9){ n=sumDigits(n); if([11,22,33].includes(n) && keepMaster) return n; } return n; };
  const parseDateDigits=(s)=> s.replace(/[^0-9]/g,'').split('').map(d=>Number(d));
  const nameNumbers=(name)=>{const letters=normalize(name).replace(/[^A-Z]/g,''); let vowels=0,cons=0,total=0; for(const ch of letters){const v=charValue(ch); total+=v; if(VOWELS.has(ch)) vowels+=v; else cons+=v;} return {total,vowels: vowels, consonants: cons};};

  // ===== Meanings (core) =====
  const meaningsLifePath = {
    1: 'IniÈ›iator, lider, independenÈ›Äƒ, curaj, pionierat. LecÈ›ie: Ã®ncredere È™i direcÈ›ie clarÄƒ.',
    2: 'Diplomat, cooperare, sensibilitate, armonie, parteneriate. LecÈ›ie: limite sÄƒnÄƒtoase.',
    3: 'Creativitate, comunicare, bucurie, expresie artisticÄƒ. LecÈ›ie: finalizeazÄƒ, nu te risipi.',
    4: 'StructurÄƒ, muncÄƒ, responsabilitate, stabilitate. LecÈ›ie: flexibilitate È™i viziune.',
    5: 'Libertate, cÄƒlÄƒtorii, schimbare, adaptabilitate. LecÈ›ie: disciplinÄƒ Ã®n haos.',
    6: 'Familie, grijÄƒ, esteticÄƒ, responsabilitate socialÄƒ. LecÈ›ie: echilibru Ã®ntre tine È™i ceilalÈ›i.',
    7: 'Cercetare, introspecÈ›ie, spiritualitate, perfecÈ›ionism. LecÈ›ie: deschidere È™i Ã®ncredere.',
    8: 'Putere, management, resurse, succes material. LecÈ›ie: eticÄƒ È™i generozitate.',
    9: 'Umanitar, artÄƒ, compasiune, finalizÄƒri, viziune globalÄƒ. LecÈ›ie: detaÈ™are È™i iertare.',
    11: 'NumÄƒr maestru â€“ inspiraÈ›ie, vizionar, canal spiritual. LecÈ›ie: ancorare È™i echilibru emoÈ›ional.',
    22: 'NumÄƒr maestru â€“ arhitectul vieÈ›ii, manifestare la scarÄƒ mare. LecÈ›ie: rÄƒbdare È™i coerenÈ›Äƒ.',
    33: 'NumÄƒr maestru â€“ maestrul inimii, vindecare prin iubire. LecÈ›ie: graniÈ›e È™i autoâ€‘Ã®ngrijire.'
  };
  const meaningsExpression = {
    1: 'Autonomie, iniÈ›iativÄƒ, brand personal puternic.',
    2: 'Tact, mediere, eleganÈ›Äƒ, lucrul cu oamenii.',
    3: 'CarismÄƒ, comunicare, artÄƒ, educaÈ›ie prin bucurie.',
    4: 'Organizare, procese, fiabilitate.',
    5: 'Mobilitate, turism, marketing, experimente.',
    6: 'EsteticÄƒ, Ã®ngrijire, design, servicii premium.',
    7: 'AnalizÄƒ, cercetare, mentorat profund.',
    8: 'Leadership operaÈ›ional, finanÈ›e, proiecte mari.',
    9: 'ArtÄƒ, educaÈ›ie, cauze umanitare, internaÈ›ional.',
    11: 'InspiraÈ›ie publicÄƒ, mesaj spiritual, creativitate superioarÄƒ.',
    22: 'Implementare vizionarÄƒ, proiecte internaÈ›ionale solide.',
    33: 'EducaÈ›ie vindecÄƒtoare, ghidaj din inimÄƒ la scarÄƒ largÄƒ.'
  };

  // ===== Spheres (RO full) â€“ extrase È™i condensate fidel din documentul tÄƒu =====
  // NotÄƒ: Pentru FR, UI este deja tradusÄƒ; conÈ›inutul integral FR Ã®l completÄƒm dupÄƒ confirmare.
  const spheresRO = {
    1: {
      title: '1 â€“ Sfera de InteligenÈ›Äƒ PsihicÄƒ',
      blocks: [
        'CÄƒsuÈ›a 1 â€“ Psihicul, inteligenÈ›a psihicÄƒ, caracterul È™i voinÈ›a psihicÄƒ: cÄƒutare de soluÈ›ii, idei noi, luarea deciziilor, independenÈ›Äƒ, caracter. Cei cu 1 È™i 11 pot avea tendinÈ›Äƒ spre depresie; 4 sau mai mulÈ›i de 1 â€“ risc de tulburare psihicÄƒ maniacalÄƒ / delir.',
        'Un singur 1: ca un soare ce lumineazÄƒ doar pentru sine. 11: lumineazÄƒ È™i Ã®ncÄƒlzeÈ™te uneori. 111: oferÄƒ constant luminÄƒ È™i cÄƒldurÄƒ fÄƒrÄƒ a aÈ™tepta ceva. 1111: pot â€žpÃ¢rjoliâ€ uneori. 11111+: ca soarele Ã®n miezul verii; Ã®n situaÈ›ii poate deveni torÈ›Äƒ.',
        'LipsÄƒ de 1 (0): manifestare extremistÄƒ Ã®ntre generozitate È™i egoism; nevoie de afirmare a dorinÈ›elor È™i de a se impune cÃ¢nd e cÄƒlcat Ã®n picioare; categorie de spirite evoluate, Ã®ntÃ¢lniÈ›i mai ales dupÄƒ 2000.'
      ]
    },
    2: {
      title: '2 â€“ Sfera de InteligenÈ›Äƒ EmoÈ›ionalÄƒ',
      blocks: [
        'Versatilitate emoÈ›ionalÄƒ, energie, magnetism, sensibilitate. FÄƒrÄƒ niciun 2: versatilitate scÄƒzutÄƒ, trecere grea Ã®ntre stÄƒri, dificil de lucrat cu publicul. FÄƒrÄƒ mÄƒcar 22: relaÈ›ia directÄƒ cu publicul nu este punct forte. 222+: versatilitate emoÈ›ionalÄƒ mare â€“ adaptare facilÄƒ fiecÄƒrui om.'
      ]
    },
    3: {
      title: '3 â€“ Sfera de InteligenÈ›Äƒ CognitivÄƒ',
      blocks: [
        'Zero la 3: extremism cognitiv â€“ sclipiri de geniu sau dificultÄƒÈ›i de integrare; creativitate cÃ¢nd la maxim, cÃ¢nd deloc; logica nu e punct forte; preferinÈ›Äƒ pentru uman; tendinÈ›a de a repeta greÈ™elile; matematicÄƒ mai greu de Ã®nÈ›eles; corelaÈ›ii cu probabilitatea de a avea bÄƒiat (Ã®n funcÈ›ie de partener).',
        'Un singur 3 â€“ ÃŽncÄƒpÄƒÈ›Ã¢natul: Ã®nvaÈ›Äƒ doar din greÈ™elile proprii; poate excela Ã®ntrâ€‘o È™tiinÈ›Äƒ exactÄƒ din aria de interes; memoreazÄƒ selectiv.',
        'Doi de 3 â€“ DascÄƒlul/Profesorul: imaginaÈ›ie bogatÄƒ, Ã®nvaÈ›Äƒ din propriile greÈ™eli È™i ale altora, explicÃ¢nd altora Ã®È™i clarificÄƒ ideile; informaÈ›ii multe dar uneori superficiale; cÃ¢nd iubeÈ™te un domeniu, Ã®l duce spre artÄƒ.'
      ]
    },
    4: {
      title: '4 â€“ Sfera de InteligenÈ›Äƒ FizicÄƒ',
      blocks: [
        'Zero la 4: manifestare extremistÄƒ a potenÈ›ialului practic (maxim/minim); legÄƒturÄƒ strÃ¢nsÄƒ cu tatÄƒl (absent sau copleÈ™itor); imunitate aparte; nevoie de practicÄƒ; risc de 2 boli cronice la 40â€“50 ani.',
        'Un singur 4: ordonat, practic, meÈ™teÈ™ugar; rezistenÈ›Äƒ la boli; capacitate de autovindecare.',
        'Doi de 4: ordine È™i Ã®ngrijire; muncitor, talent la lucrul manual; model de credinÈ›e preluat de la tatÄƒ; cerinÈ›e ale corpului fizic mari; sÄƒnÄƒtate puternicÄƒ; grijÄƒ sÄƒ nu devinÄƒ sclavul cÃ¢È™tigului material; organizator al altora, nu mereu al sÄƒu.',
        'Trei de 4: inteligenÈ›Äƒ corporalÄƒ mare, rezistenÈ›Äƒ fizicÄƒ; risc de a uita de odihnÄƒ; potenÈ›ial de â€žmaÈ™inÄƒ de muncÄƒâ€; nevoie de echilibru.'
      ]
    },
    5: {
      title: '5 â€“ Sfera de InteligenÈ›Äƒ IntuitivÄƒ',
      blocks: [
        'Zero la 5: intuiÈ›ie È™i logicÄƒ duse Ã®n extrem sau absente; indecizie; imagine de sine fluctuantÄƒ; gelozie pe libertatea altora; rezistenÈ›Äƒ la schimbare; dificultÄƒÈ›i Ã®n realizarea viselor; imunitate scÄƒzutÄƒ.',
        'Un singur 5 â€“ ÃŽncÄƒpÄƒÈ›Ã¢natul: cautÄƒ libertatea, dar are de lucrat la constanÈ›Äƒ.'
      ]
    },
    6: {
      title: '6 â€“ Sfera de InteligenÈ›Äƒ VolitivÄƒ (familie/responsabilitate)',
      blocks: [
        'Un singur 6 â€“ Responsabilul: Ã®È™i asigurÄƒ traiul, muncitor, dar are tendinÈ›a sÄƒ preia problemele altora; naturÄƒ creativÄƒ, iubeÈ™te arta È™i familia.',
        'Doi de 6: practic, adaptabil, bun statut material; poate â€žmimaâ€ exteriorul pÃ¢nÄƒ atinge scopul; bun la bani; memorie bunÄƒ; are nevoie sÄƒ foloseascÄƒ mai mult creativitatea.',
        'Trei de 6 â€“ Harnicul / SeducÄƒtorul: maniac al muncii, materializeazÄƒ rapid, atracÈ›ie sexualÄƒ crescutÄƒ; impulsiv; potenÈ›ial creativ uriaÈ™ dar uÈ™or distras de grijile casnice.',
        'Patru de 6: posesivitate, instinct sexual puternic, harnic, responsabil.'
      ]
    },
    7: {
      title: '7 â€“ Sfera de InteligenÈ›Äƒ SpiritualÄƒ',
      blocks: [
        'Zero la 7: extremism spiritual â€“ ateism sau fanatism; neÃ®ncredere, teamÄƒ de singurÄƒtate; neplÄƒcerea efortului fizic; spre a doua parte a vieÈ›ii poate surveni trezirea spiritualÄƒ (sau invers).',
        'Doi de 7: individualism, iubesc singurÄƒtatea; viaÈ›Äƒ Ã®ncercatÄƒ, test de credinÈ›Äƒ; buni dascÄƒli, Ã®nÈ›elepÈ›i, analitici; cÄƒutÄƒtori ai sensului vieÈ›ii.',
        'Trei de 7 â€“ â€žChip angelicâ€: trÄƒiesc intens, pot schimba destine; atraÈ™i de supranatural; misiune de ocrotire; carismÄƒ aparte.'
      ]
    },
    8: {
      title: '8 â€“ Sfera de InteligenÈ›Äƒ SocialÄƒ (ordine/putere)',
      blocks: [
        'Zero la 8: simÈ› al datoriei fluctuant; spirit de sacrificiu dus Ã®n extreme; posibilitÄƒÈ›i de acumulare materialÄƒ dar instabilitate familialÄƒ; lipsÄƒ de punctualitate/organizare; comunicarea Ã®n societate este de mare ajutor.',
        'Un singur 8: ordonat, organizat, atent la detalii; duce sarcinile la capÄƒt, dar stresul Ã®l afecteazÄƒ; nu-i plac constrÃ¢ngerile; Ã®n copilÄƒrie poate fi neastÃ¢mpÄƒrat.',
        'Patru de 8: foarte rari; pot avea capacitÄƒÈ›i paranormale; simt chemarea dreptÄƒÈ›ii; pot deveni lideri incomozi pentru alÈ›ii.'
      ]
    },
    9: {
      title: '9 â€“ Sfera de InteligenÈ›Äƒ MentalÄƒ / IQ',
      blocks: [
        'Zero la 9 (mai ales nÄƒscuÈ›i dupÄƒ 2000): inteligenÈ›Äƒ inconstantÄƒ; dependenÈ›Äƒ de tehnologie; curiozitate pentru tainele universului; adaptare greoaie la schimbÄƒri pÃ¢nÄƒ intervin factori externi; natura Ã®i armonizeazÄƒ.',
        'Un singur 9: IQ mediu; dor de casÄƒ; nu oferÄƒ frecvent ajutor, dar o face Ã®n momente critice; poate genera conflicte.',
        'Doi de 9: potenÈ›ial creativ mare; probleme cu emoÈ›iile; memorie puternicÄƒ; pot fi superficiali fÄƒrÄƒ motivaÈ›ie.',
        'Trei de 9: Ã®ncredere mare Ã®n sine, iubesc pacea È™i natura; pot fi creduli; idei uneori dure; schimbÄƒ des mediul.',
        'Patru/Cinci de 9: minte sclipitoare, forÈ›Äƒ intelectualÄƒ deosebitÄƒ; pot manipula sau deveni È›intÄƒ a jocurilor de culise dacÄƒ abuzeazÄƒ.'
      ]
    }
  };

  // Minimal FR placeholders for spheres (UI already bilingual). To be expanded with full fluent FR.
  const spheresFR = Object.fromEntries(Object.entries(spheresRO).map(([k,v])=>[
    k,
    { title: v.title.replace('Sfera de InteligenÈ›Äƒ','SphÃ¨re dâ€™Intelligence').replace('Matricea','Matrice'), blocks: v.blocks.map(t=> 'ðŸ“ Traduction FR Ã  venir â€“ '+t) }
  ]));

  // ===== Renderers =====
  let currentLang = 'ro';
  const $ = (id)=> document.getElementById(id);

  function setLang(lang){
    currentLang = lang;
    const L = I18N[lang];
    $('intro').innerHTML = L.intro;
    $('lblName').textContent = L.name;
    $('lblDate').textContent = L.date;
    $('hintName').textContent = L.hintName;
    $('hintDate').textContent = L.hintDate;
    $('calcBtn').textContent = L.calc;
    $('keepMasterPill').textContent = L.keepMaster;
    $('k1').textContent = L.k1; $('k2').textContent = L.k2; $('k3').textContent = L.k3; $('k4').textContent = L.k4;
    $('kpiNote').textContent = L.kpiNote;
    $('matTitle').textContent = L.matTitle;
    $('matHint').textContent = L.matHint;
    $('interpTitle').textContent = L.interpTitle;
    $('sumSpheres').textContent = L.sumSpheres;
    $('frNotice').style.display = lang==='fr' ? 'block' : 'none';
    renderSpheres([]); // reset
  }

  function buildMatrixCounts(dateStr){
    const digits = parseDateDigits(dateStr);
    const counts = {1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0};
    for(const d of digits){ if(d!==0) counts[d]++; }
    return counts;
  }

  function renderMatrix(counts){
    const order = [[1,2,3],[4,5,6],[7,8,9]];
    const t = ['<tbody>'];
    for(const row of order){
      t.push('<tr>');
      for(const n of row){
        const c = counts[n]||0;
        t.push(`<td><div class="badge">${n}</div><div style="font-weight:800;font-size:18px;margin-top:4px">${c||'â€“'}</div></td>`);
      }
      t.push('</tr>');
    }
    t.push('</tbody>');
    $('matrixTable').innerHTML = t.join('');
  }

  function renderCoreNumbers(res){
    const L = I18N[currentLang];
    const html = `
      <details open>
        <summary>${L.k1}: <span class="badge">${res.lifePath}</span></summary>
        <p class="mt">${meaningsLifePath[res.lifePath]||''}</p>
      </details>
      <details class="mt" open>
        <summary>${L.k2}: <span class="badge">${res.expression}</span></summary>
        <p class="mt">${meaningsExpression[res.expression]||''}</p>
      </details>
      <details class="mt">
        <summary>${L.k3}: <span class="badge">${res.heart}</span></summary>
        <p class="mt">â€”</p>
      </details>
      <details class="mt">
        <summary>${L.k4}: <span class="badge">${res.personality}</span></summary>
        <p class="mt">â€”</p>
      </details>
    `;
    $('coreNumbers').innerHTML = html;
  }

  function renderSpheres(counts){
    const dict = currentLang==='ro' ? spheresRO : spheresFR;
    const rows = [];
    for(let i=1;i<=9;i++){
      const info = dict[i];
      const c = counts[i]||0;
      const badge = `<span class="badge">${i} Â· ${c || '0'}</span>`;
      rows.push(`<h3>${info.title} ${badge}</h3>`);
      info.blocks.forEach(par=> rows.push(`<p>${par}</p>`));
      rows.push('<hr style="border:none;border-top:1px dashed #e3e5ff;margin:12px 0">');
    }
    $('spheres').innerHTML = rows.join('');
  }

  // ===== Calculate =====
  function calculate(){
    const name = $('name').value||'';
    const date = $('birth').value||'';
    const keepMaster = true;

    // Life Path
    const sum = parseDateDigits(date).reduce((a,b)=>a+b,0);
    const lifePath = reduceNumber(sum, keepMaster);

    // Name numbers
    const { total, vowels, consonants } = nameNumbers(name);
    const expression = reduceNumber(total, keepMaster);
    const heart = reduceNumber(vowels, keepMaster);
    const personality = reduceNumber(consonants, keepMaster);

    const results = { lifePath, expression, heart, personality };

    // Render KPIs
    $('lifePath').textContent = lifePath||'-';
    $('expression').textContent = expression||'-';
    $('heart').textContent = heart||'-';
    $('personality').textContent = personality||'-';

    // Matrix
    const counts = buildMatrixCounts(date);
    renderMatrix(counts);

    // Interp
    renderCoreNumbers(results);
    renderSpheres(counts);
  }

  // ===== Events =====
  $('calcBtn').addEventListener('click', calculate);
  $('roBtn').addEventListener('click', ()=>{ setLang('ro'); $('roBtn').setAttribute('aria-pressed','true'); $('frBtn').setAttribute('aria-pressed','false'); });
  $('frBtn').addEventListener('click', ()=>{ setLang('fr'); $('frBtn').setAttribute('aria-pressed','true'); $('roBtn').setAttribute('aria-pressed','false'); });

  // Init
  setLang('ro');
  </script>
</body>
</html>
